K3s, hafif bir Kubernetes dağıtımıdır. K3s, tam özellikli Kubernetes'i basitleştirilmiş bir paketlemeyle sunar ve özellikle kaynak sınırlı ortamlarda kullanım için optimize edilmiştir.
K3s, tek bir kontrol düğümü ve hafif ajanlarla çalışır. Kontrol düğümü, Kubernetes API'sini sunar ve ajanlar, düğümlerde çalışan konteyner iş yüklerini yönetir.
K3s, hızlı bir kurulum sürecine sahiptir ve düşük bellek ve işlemci gereksinimleriyle çalışabilir. Bu nedenle, IoT cihazları gibi kaynak sınırlı ortamlarda kullanmak için idealdir. 
K3s, hafif bir Kubernetes dağıtımıdır. K3s, tam özellikli Kubernetes'i basitleştirilmiş bir paketlemeyle sunar ve özellikle kaynak sınırlı ortamlarda kullanım için optimize edilmiştir. 
K3s, tek bir kontrol düğümü ve hafif ajanlarla çalışır. Kontrol düğümü, Kubernetes API'sini sunar ve ajanlar, düğümlerde çalışan konteyner iş yüklerini yönetir. 
K3s, hızlı bir kurulum sürecine sahiptir ve düşük bellek ve işlemci gereksinimleriyle çalışabilir. Bu nedenle, IoT cihazları gibi kaynak sınırlı ortamlarda kullanmak için idealdir.

Vagrant Komutları:

vagrant init: Initializes a new Vagrant environment with a Vagrantfile.
vagrant up: Creates and provisions the virtual machine(s) defined in the Vagrantfile.
vagrant ssh: Connects to the default SSH session of the virtual machine.
vagrant halt: Stops the running virtual machine(s).
vagrant destroy: Destroys all resources created by the virtual machine(s).

Kubernetes (kubectl) Komutları:

kubectl get pods: Lists all running pods in the current namespace.
kubectl create deployment <name> --image=<image>: Creates a new deployment using the specified image.
kubectl scale deployment <name> --replicas=<count>: Scales the specified deployment to the desired number of replicas.
kubectl expose deployment <name> --port=<port>: Exposes the specified deployment as a service on the specified port.
kubectl delete deployment <name>: Deletes the specified deployment.

Kubectl user kullandığında Kubernetes-api-server a istek atar restfull bir apidir. Api-server diğer componentlerden bilgileri alarak size verir.
api-server tüm giriş çıkışlarda ilk erişilen yerdir.

Olası hatalar için araştırmalar sırasında bulunan kodlar:

--write-kubeconfig-mode 644                                     --> YÜkleme sırasında verilen flag. Kubectl permission denied hatasından kaçınmak için gerekli.

sudo systemctl disable firewalld --now                          --> kubectl nodelar arası iletişimde firewall yapılandırılmadığında sorunlar ortaya çıkabilir.

sudo setenforce 0                                               --> SELinux (Security-Enhanced Linux) gerekli ayarlamalar yapılandırılmadığında sorunlar ortaya çıkabilir. (kurulan sisteme göre!)
sed -i 's/SELINUX=.*/SELINUX=disabled/g' /etc/selinux/config    --> Linux işletim sistemlerinde ek güvenlik katmanı sağlayan bir güvenlik politikası ve uygulama kontrol mekanizmasıdır.
                                                                --> SELinux genellikle centOS'da default açıktır, Debian sistemlerde default olarak kurulmaz.

sudo swapoff -a                                                 --> Kubernetes ve benzeri konteyner yönetim sistemlerinde swapoff -a komutu genellikle kullanılır çünkü:
                                                                    Performans İyileştirmesi: Konteynerler, genellikle belirli bir RAM ve CPU kaynağı tahsis edilmiş sanal işletim sistemleri olduğu için,
                                                                    swap kullanımı beklenmedik performans sorunlarına neden olabilir. Swap alanı, konteynerlerin performansını düşürebilir veya beklenmedik durumlarla karşılaşılmasına neden olabilir.

                                                                    Kubernetes Yönetimi: Kubernetes, özellikle iş yüklerini optimize etmek ve kaynakları etkin bir şekilde kullanmak için tasarlanmıştır.
                                                                    Bu nedenle, swap alanının kapatılması veya devre dışı bırakılması, Kubernetes cluster'ında daha istikrarlı bir performans sağlamak için önemli olabilir.

                                                                    Hata Önleme: Swap kullanımı bazı durumlarda beklenmeyen hatalara veya iş yüklerinin başarısız olmasına neden olabilir.
                                                                    Swap alanının kapatılması, bu tür hataların önlenmesine yardımcı olabilir.


sudo /usr/local/bin/k3s-agent-uninstall.sh                      --> Yeniden Kurulum veya Güncelleme: Kubernetes veya k3s sürümlerinde bir güncelleme veya yeniden yapılandırma yapılması durumunda, 
                                                                    varolan ajanların temizlenmesi ve yeniden kurulum için bu tür bir komut kullanılabilir.


sudo kill $( lsof -i:6443 -t )                                  --> 6443 nolu portu kullanan tüm işlemlerin pid'sini alır ve işlemleri sonlandırarak kullanılan portu boşaltır.
                                                                    Kubectl 6443 kullanır, tekrar kurulum gibi senaryolarda faydalı olur.


Older Debian release may suffer from a known iptables bug. See Known Issues.        |
                                                                                    |
It is recommended to turn off ufw (uncomplicated firewall):                         |
                                                                                    |
ufw disable                                                                         |  --> Debian için ufw devredışı bırakılması öneriliyor veya ufw ayarlamaları yapılmalı
                                                                                    |  --> #link https://docs.k3s.io/installation/requirements?os=debian
If you wish to keep ufw enabled, by default, the following rules are required:      |
                                                                                    |
ufw allow 6443/tcp #apiserver                                                       |
ufw allow from 10.42.0.0/16 to any #pods                                            |
ufw allow from 10.43.0.0/16 to any #services                                        |